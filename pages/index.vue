<template>
  <div>
    <div class="home-page">
      <div class="slider">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-6">
              <div class="main-content">
                <h1>دروسك في بيتك</h1>
                <p>
                  الأن مع بستطهالك كل دروسك من بيتك في كل المواد الدراسية
                  <br />بين افضل المتفوقين
                </p>
                <!-- <nuxt-link
                  :to="'/links'"
                  class="text-center"
                  style="display: block; font-size: 20px;"
                  >اللينكات</nuxt-link
                >-->
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="who-we-are" id="who-we-are">
        <div class="background-who-we-are">
          <img src="../assets/imgs/logo.png" alt style="width: 100%;" />
        </div>
        <div class="container">
          <div class="head-who">
            <span></span>
            <span></span>
            <span></span>
            <h3>من نحن</h3>
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="logo-who-we-are">
            <img src="../assets/imgs/logo.png" alt />
          </div>
          <div class="title-who-we-are">
            <p>
              هناك حقيقة مقبتة منذ زمن طويل و هي ان المحتوي المقروء لصفحة ما
              يسهلها القارئ عن التركيز علي الشكل الخارجي للنص أو شكل توضع
              الفقرات في الصفحة التي يقرأهاز هناك حقيقة مقبتة منذ زمن طويل و هي
              ان المحتوي المقروء لصفحة ما يسهلها القارئ عن التركيز علي الشكل
              الخارجي للنص أو شكل توضع الفقرات في الصفحة التي يقرأهاز هناك حقيقة
              مقبتة منذ زمن طويل و هي ان المحتوي المقروء لصفحة ما يسهلها القارئ
              عن التركيز علي الشكل الخارجي للنص أو شكل توضع الفقرات في الصفحة
              التي يقرأهاز هناك حقيقة مقبتة منذ زمن طويل و هي ان المحتوي المقروء
              لصفحة ما يسهلها القارئ عن التركيز علي الشكل الخارجي للنص أو شكل
              توضع الفقرات في الصفحة التي يقرأهاز هناك حقيقة مقبتة منذ زمن طويل
              و هي ان المحتوي المقروء لصفحة ما يسهلها القارئ عن التركيز علي
              الشكل الخارجي للنص أو شكل توضع الفقرات في الصفحة التي يقرأهاز هناك
              حقيقة مقبتة منذ زمن طويل و هي ان المحتوي المقروء لصفحة ما يسهلها
              القارئ عن التركيز علي الشكل الخارجي للنص أو شكل توضع الفقرات في
              الصفحة التي يقرأهاز هناك حقيقة مقبتة منذ زمن طويل و هي ان المحتوي
              المقروء لصفحة ما يسهلها القارئ عن التركيز علي الشكل الخارجي للنص
              أو شكل توضع الفقرات في الصفحة التي يقرأهاز هناك حقيقة مقبتة منذ
              زمن طويل و هي ان المحتوي المقروء لصفحة ما يسهلها القارئ عن التركيز
              علي الشكل الخارجي للنص أو شكل توضع الفقرات في الصفحة التي يقرأهاز
            </p>
          </div>
        </div>
      </div>

      <div class="our-view" id="our-view">
        <div class="container">
          <div class="head-who" style="margin-bottom: 0;">
            <span></span>
            <span></span>
            <span></span>
            <h3>رؤيتنا</h3>
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <div class="view-cont first" style="overflow: hidden;">
          <div class="row">
            <div class="col-md-5">
              <div class="desc-image">
                <img src="../assets/imgs/البساطة.png" alt />
              </div>
            </div>
            <div class="col-md-7">
              <div class="desc-cont" style="margin-top: 170px;">
                <h3>البساطة</h3>
                <p>
                  تطبيق بسطتهالك يقدم لك طريقة سهلة و ابداعية في شرح المواد في
                  جميع المراحل.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="view-cont second" style="overflow: hidden;">
          <div class="row">
            <div class="col-md-5 order-md-7 test-image-div">
              <div class="desc-image">
                <img src="../assets/imgs/الاختبارات.png" alt />
              </div>
            </div>

            <div class="col-md-7 order-md-5">
              <div class="container">
                <div class="desc-cont">
                  <h3>الأختبارات</h3>
                  <p class="wierd-paragraph">
                    العديد من الأختبارات سواء كانت علي الدروس أو اختبارات عامة
                    او اخبارات بنك المعلومات .
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="view-cont thired" style="overflow: hidden;">
          <div class="row">
            <div class="col-md-5">
              <div class="desc-image">
                <img src="../assets/imgs/المنافسة.png" alt />
              </div>
            </div>
            <div class="col-md-7">
              <div class="container">
                <div class="desc-cont" style="margin-top: 170px;">
                  <h3>المنافسة</h3>
                  <p>
                    سيتم عمل ترتيب عام للمتفوقين من حيث الأكثر حصولا علي النقاط
                    و اجتياز الأختبارات.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="the-best" style="overflow: hidden;" id="the-best">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <div class="head-who">
                <span></span>
                <span></span>
                <span></span>
                <h3>المتفوقين</h3>
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
            <div class="col-md-6">
              <div class="all-the-best-btn">
                <nuxt-link to="/best-students" style="color:#FFF">
                  <button class="btn">عرض جميع المتفوقين</button>
                </nuxt-link>
              </div>
            </div>
          </div>
          <Loading v-if="isLoading" />
          <div v-else-if="!isLoading && $auth.loggedIn" class="best-sort" style="overflow: hidden;">
            <div class="row" v-if="students.length>0">
              <div class="col-md-4">
                <div class="user-sort-item">
                  <div class="profile-pic">
                    <span>
                      <img src="../assets/imgs/thired2x.png" alt />
                    </span>
                    <img style="border-radius:50%" :src="students[2].user.photo" alt />
                    <div class="profile-cont">
                      <h3>{{students[2].user.username}}</h3>
                      <!-- <h3> {{students[1].user.level | getLevel}} </h3> -->
                      <div class="profile-cont-point" style="overflow: hidden;">
                        <img src="../assets/imgs/point.png" alt />
                        <h6>{{students[1].points}}</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="user-sort-item first-student">
                  <div class="profile-pic">
                    <span>
                      <img src="../assets/imgs/first3x.png" alt />
                    </span>
                    <img style="border-radius:50%" :src="students[0].user.photo" alt />
                    <div class="profile-cont">
                      <h3>{{students[0].user.username}}</h3>
                      <!-- <h3>{{students[2].user.level | getLevel}} </h3> -->
                      <div class="profile-cont-point" style="overflow: hidden;">
                        <img src="../assets/imgs/point.png" alt />
                        <h6>{{students[0].points}}</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="user-sort-item">
                  <div class="profile-pic">
                    <span>
                      <img src="../assets/imgs/second-2x.png" alt />
                    </span>
                    <img style="border-radius:50%" :src="students[1].user.photo" alt />
                    <div class="profile-cont">
                      <h3>{{students[1].user.username}}</h3>
                      <!-- <h3>{{students[0].user.level | getLevel}}</h3> -->
                      <div class="profile-cont-point" style="overflow: hidden;">
                        <img src="../assets/imgs/point.png" alt />
                        <h6>{{students[1].points}}</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div v-else-if="!$auth.loggedIn" class="best-sort" style="overflow: hidden;">
            <div class="row">
              <div class="col-md-4">
                <div class="user-sort-item">
                  <div class="profile-pic">
                    <span>
                      <img src="../assets/imgs/thired2x.png" alt />
                    </span>
                    <img src="../assets/imgs/user.png" alt />
                    <div class="profile-cont">
                      <!-- <h3>احمد محمود</h3> -->
                      <!-- <h3>الصف الاول الثانوي</h3> -->
                      <div class="profile-cont-point" style="overflow: hidden;">
                        <img src="../assets/imgs/point.png" alt />
                        <h6>140</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="user-sort-item first-student">
                  <div class="profile-pic">
                    <span>
                      <img src="../assets/imgs/first3x.png" alt />
                    </span>
                    <img src="../assets/imgs/user.png" alt />
                    <div class="profile-cont">
                      <!-- <h3>احمد محمود</h3> -->
                      <!-- <h3>الصف الاول الثانوي</h3> -->
                      <div class="profile-cont-point" style="overflow: hidden;">
                        <img src="../assets/imgs/point.png" alt />
                        <h6>150</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="user-sort-item">
                  <div class="profile-pic">
                    <span>
                      <img src="../assets/imgs/second-2x.png" alt />
                    </span>
                    <img src="../assets/imgs/user.png" alt />
                    <div class="profile-cont">
                      <!-- <h3>احمد محمود</h3> -->
                      <!-- <h3>الصف الاول الثانوي</h3> -->
                      <div class="profile-cont-point" style="overflow: hidden;">
                        <img src="../assets/imgs/point.png" alt />
                        <h6>145</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="download-app" id="download-app">
        <div class="container">
          <div class="download-app-cont" style="overflow: hidden;">
            <div class="row">
              <div class="col-md-6">
                <div>
                  <div class="head-who">
                    <span></span>
                    <span></span>
                    <span></span>
                    <h3>حمل التطبيق</h3>
                    <span></span>
                    <span></span>
                    <span></span>
                  </div>
                  <h3>قم بتحميل تطبيق الجوال الان</h3>
                  <div class="android-ios" style="overflow: hidden;">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="android" style="overflow: hidden;">
                          <div class="row">
                            <div class="col-md-6">
                              <div>حمله من جوجل بلاي</div>
                            </div>
                            <div class="col-md-6">
                              <div>
                                <img src="../assets/imgs/android.png" alt />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="ios">
                          <div class="row">
                            <div class="col-md-6">
                              <div>حمله من أب استور</div>
                            </div>
                            <div class="col-md-6">
                              <div>
                                <img src="../assets/imgs/apple.png" alt />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div>
                  <img src="../assets/imgs/mobile.png" alt />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="question-and-answer" id="question-and-answer">
        <div class="container">
          <div class="head-who">
            <span></span>
            <span></span>
            <span></span>
            <h3>أسئلة و أجوبة</h3>
            <span></span>
            <span></span>
            <span></span>
          </div>

          <div class="questions-sec">
            <div class="row">
              <div class="col-md-6" v-if="studentsQuestions.length>6">
                <div class="ques">
                  <div class="ques-item">
                    <div class="row">
                      <div class="col-md-10 col-10">
                        <h4>{{studentsQuestions[0].question}}</h4>
                        <p v-if="ques1">{{studentsQuestions[0].answer}}</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <div class="icon">
                          <button @click="ques1= !ques1">
                            <img src="../assets/imgs/add.png" alt />
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="ques-item">
                    <div class="row">
                      <div class="col-md-10 col-10">
                        <h4>{{studentsQuestions[1].question}}</h4>
                        <p v-if="ques2">{{studentsQuestions[1].answer}}</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <div class="icon">
                          <button @click="ques2 = !ques2">
                            <img src="../assets/imgs/add.png" alt />
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="ques-item">
                    <div class="row">
                      <div class="col-md-10 col-10">
                        <h4>{{studentsQuestions[2].question}}</h4>
                        <p v-if="ques3">{{studentsQuestions[2].answer}}</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <div class="icon">
                          <button @click="ques3 = !ques3">
                            <img src="../assets/imgs/add.png" alt />
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="ques-item">
                    <div class="row">
                      <div class="col-md-10 col-10">
                        <h4>{{studentsQuestions[3].question}}</h4>
                        <p v-if="ques4">{{studentsQuestions[3].answer}}</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <div class="icon">
                          <button @click="ques4 = !ques4">
                            <img src="../assets/imgs/add.png" alt />
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="ques-item">
                    <div class="row">
                      <div class="col-md-10 col-10">
                        <h4>{{studentsQuestions[4].question}}</h4>
                        <p v-if="ques5">{{studentsQuestions[4].answer}}</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <div class="icon">
                          <button @click="ques5 = !ques5">
                            <img src="../assets/imgs/add.png" alt />
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="ques-item" style="overflow: hidden;">
                    <div class="row">
                      <div class="col-md-10 col-10">
                        <h4>{{studentsQuestions[5].question}}</h4>
                        <p v-if="ques6">{{studentsQuestions[5].answer}}</p>
                      </div>
                      <div class="col-md-2 col-2">
                        <div class="icon">
                          <button @click="ques6 = !ques6">
                            <img src="../assets/imgs/add.png" alt />
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="ask-ques">
                  <div class="ask-ques-head">
                    <div class="row">
                      <div class="col-md-3 col-3">
                        <img src="../assets/imgs/ask-ques.png" alt />
                      </div>
                      <div class="col-md-9 col-9">
                        <h4>أرسل سؤلك</h4>
                      </div>
                    </div>
                  </div>
                  <div class="ask-ques-head" style="padding-right: 16px;">
                    <div class="row">
                      <div class="col-md-3 col-3">
                        <img src="../assets/imgs/chat-avatar.png" alt />
                      </div>
                      <div class="col-md-9 col-9">
                        <p style="margin-top: 23px;">قم بأرسال استفسارك و سنجاوب عليك في اسرع وقت</p>
                      </div>
                    </div>
                  </div>
                  <Loading v-if="isLoading" />
                  <div v-else class="send">
                    <div class="form-groub">
                      <img
                        v-if="$auth.loggedIn"
                        @click="sendQuestion"
                        src="../assets/imgs/send.png"
                        style="cursor:pointer"
                        alt
                      />
                      <input
                        v-model="question"
                        placeholder="أرسل سؤالك"
                        type="text"
                        class="form-control"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="partnars" id="partnars">
            <div class="container">
              <div class="head-who">
                <span></span>
                <span></span>
                <span></span>
                <h3>شركاؤنا</h3>
                <span></span>
                <span></span>
                <span></span>
              </div>
              <Loading v-if="isLoading" />
              <div class="partnars-item" style v-else>
                <div class="row">
                  <div class="col-md-4" v-for="part in partners" :key="part.id">
                    <div class="partner">
                      <div style="text-align:center">
                        <img style="width: 166px;height: 133px;border-radius: 50%;box-shadow: 0 2px 13px 1px #ddd;margin: auto;text-align: center;" :src="part.image" />
                        <h4 style=" text-align: center;margin-top: 20px;color: #0989c3;"> {{part.name}} </h4>
                        <p style="text-align: center;color: #676767;"> {{part.description}} </p>
                      </div>
                    </div>
                  </div>

                 
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import Loading from '../components/Loading'

export default {
  components: {
    Loading,
  },
  data() {
    return {
      ques1: false,
      ques2: false,
      ques3: false,
      ques4: false,
      ques5: false,
      ques6: false,
      sent: [],
            question: "",
            isLoading: false,
            students: [],
            partners: []
    }
  },
  created(){
    this.$axios.get(`partners`).then(res => {
      console.log(res)
      this.partners = res.data
    })
    this.getBestStudents()
    this.getStudentsQuestions()
  },
  methods: {
    toggleQuestion(index) {
      let quest = 'ques' + index
      this.quest = !this.quest
    },
    getStudentsQuestions() {
      // /questions-admin
      this.isLoading = true
      this.$axios
        .get(`questions-admin`)
        .then((res) => {
          this.studentsQuestions = res.data
          console.log(res)
        })
        .finally(() => (this.isLoading = false))
    },
    sendQuestion: function () {
      this.isLoading = true
      this.$axios
        .post(`questions-students`, { question: this.question })
        .then((res) => {
          console.log(res)
          this.question = ''
          this.$snotify.success(`تم إرسال السؤال بنجاح`)
        })
        .finally(() => (this.isLoading = false))
    },
    getBestStudents() {
      // /classes/5/rank
      if (this.$auth.loggedIn) {
        this.isLoading = true
        this.$axios
          .get(`classes/${this.$auth.user.class.id}/rank`)
          .then((res) => {
            this.students = res.data
            console.log(res)
          })
          .finally(() => (this.isLoading = false))
      }
    },
  },
  filters: {
    getLevels(val) {
      if (val == 1) {
        return 'الصف الأول الثانوي'
      } else if (val == 2) {
        return 'الصف الثاني الثانوي'
      } else if (val == 3) {
        return 'الصف الثالث الثانوي'
      } else if (val == 4) {
        return 'الصف الرابع الإبتدائي'
      } else if (val == 5) {
        return 'الصف الخامس الإبتدائي'
      } else if (val == 6) {
        return 'الصف السادس الإبتدائي'
      }
    },
  },
}
</script>

<style scoped lang="scss">
@import '../assets/sass/index.scss';
</style>
